{% extends "base.html" %}
{% load static %}

{% block category %}
<div class="collapse navbar-collapse">
	<!-- menus -->
	<ul class="navbar-nav mr-auto">
		<li class="nav-item">
			<a class="nav-link" href="{% url 'index' %}">Home</a>
		</li>
		<li class="nav-item dropdown">
			<a class="nav-link dropdown-toggle" href="#">Categories</a>
			<ul class="dropdown-menu">
				{% for cat in category %}
				<li><a class="dropdown-item" href="{% url 'category' cat.slug %}">{{cat.name}}</a></li>
				{% endfor %}
			</ul>
		</li>
	</ul>
</div>
{% endblock category %}

{% block body %}
<!-- Add spacer to prevent overlapping -->
<div class="navbar-spacer" style="height: 80px;"></div>

<!-- hero section -->
<section id="hero" style="position: relative; z-index: 1;">
	<div class="container-xl">
		<div class="row gy-4">
			<div class="col-lg-8">
				<!-- featured post large -->
				{% for post in main_post %}
				<div class="post featured-post-lg">
					<div class="details clearfix">
						<a href="{% url 'category' post.category.slug %}" class="category-badge">{{post.category.name}}</a>
						<h2 class="post-title"><a href="{% url 'blog_detail' post.blog_slug %}">{{post.title}}</a></h2>
						<ul class="meta list-inline mb-0">
							<li class="list-inline-item"><a href="#">{{post.author}}</a></li>
							<li class="list-inline-item">{{post.date|date:"F d, Y"}}</li>
						</ul>
					</div>
					<a href="{% url 'blog_detail' post.blog_slug %}">
						<div class="thumb rounded">
							<img src="{{post.img.url}}" alt="{{post.title}}" style="width: 100%; height: auto; display: block;" />
						</div>
					</a>
				</div>
				{% endfor %}
			</div>

			<div class="col-lg-4">
				<!-- post tabs -->
				<div class="post-tabs rounded bordered">
					<!-- tab navs -->
					<ul class="nav nav-tabs nav-pills nav-fill" id="postsTab" role="tablist">
						<li class="nav-item" role="presentation">
							<button aria-controls="popular" aria-selected="true" class="nav-link active" data-bs-target="#popular" data-bs-toggle="tab" id="popular-tab" role="tab" type="button">Popular</button>
						</li>
						<li class="nav-item" role="presentation">
							<button aria-controls="recent" aria-selected="false" class="nav-link" data-bs-target="#recent" data-bs-toggle="tab" id="recent-tab" role="tab" type="button">Recent</button>
						</li>
					</ul>
					<!-- tab contents -->
					<div class="tab-content" id="postsTabContent">
						<!-- loader -->
						<div class="lds-dual-ring"></div>
						
						<!-- popular posts -->
						<div aria-labelledby="popular-tab" class="tab-pane fade show active" id="popular" role="tabpanel">
							{% for post in post|slice:":4" %}
							<div class="post post-list-sm circle">
								<div class="thumb circle">
									<a href="{% url 'blog_detail' post.blog_slug %}">
										<div class="inner">
											<img src="{{post.img.url}}" alt="{{post.title}}" />
										</div>
									</a>
								</div>
								<div class="details clearfix">
									<h6 class="post-title my-0"><a href="{% url 'blog_detail' post.blog_slug %}">{{post.title}}</a></h6>
									<ul class="meta list-inline mt-1 mb-0">
										<li class="list-inline-item">{{post.date|date:"F d, Y"}}</li>
									</ul>
								</div>
							</div>
							{% endfor %}
						</div>
						
						<!-- recent posts -->
						<div aria-labelledby="recent-tab" class="tab-pane fade" id="recent" role="tabpanel">
							{% for post in recent_news %}
							<div class="post post-list-sm circle">
								<div class="thumb circle">
									<a href="{% url 'blog_detail' post.blog_slug %}">
										<div class="inner">
											<img src="{{post.img.url}}" alt="{{post.title}}" />
										</div>
									</a>
								</div>
								<div class="details clearfix">
									<h6 class="post-title my-0"><a href="{% url 'blog_detail' post.blog_slug %}">{{post.title}}</a></h6>
									<ul class="meta list-inline mt-1 mb-0">
										<li class="list-inline-item">{{post.date|date:"F d, Y"}}</li>
									</ul>
								</div>
							</div>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- section main content -->
<section class="main-content">
	<div class="container-xl">
		<div class="row gy-4">
			<div class="col-lg-8">
				<!-- section header -->
				<div class="section-header">
					<h3 class="section-title">Latest Posts</h3>
					<img src="{% static 'images/wave.svg' %}" class="wave" alt="wave" />
				</div>

				<div class="padding-30 rounded bordered">
					<div class="row">
						{% for blog in post %}
						<div class="col-md-12 col-sm-6">
							<!-- post -->
							<div class="post post-list clearfix">
								<div class="thumb rounded">
									<a href="{% url 'blog_detail' blog.blog_slug %}">
										<div class="inner">
											<img src="{{blog.img.url}}" alt="{{blog.title}}" />
										</div>
									</a>
								</div>
								<div class="details">
									<ul class="meta list-inline mb-3">
										<li class="list-inline-item"><a href="#">{{blog.author}}</a></li>
										<li class="list-inline-item"><a href="{% url 'category' blog.category.slug %}">{{blog.category.name}}</a></li>
										<li class="list-inline-item">{{blog.date|date:"F d, Y"}}</li>
									</ul>
									<h5 class="post-title"><a href="{% url 'blog_detail' blog.blog_slug %}">{{blog.title}}</a></h5>
									<p class="excerpt mb-0">{{blog.content|truncatewords:20}}</p>
									<div class="post-bottom clearfix d-flex align-items-center">
										<div class="social-share me-auto">
											<button class="toggle-button icon-share"></button>
											<ul class="icons list-unstyled list-inline mb-0">
												<li class="list-inline-item"><a href="#"><i class="fab fa-facebook-f"></i></a></li>
												<li class="list-inline-item"><a href="#"><i class="fab fa-twitter"></i></a></li>
												<li class="list-inline-item"><a href="#"><i class="fab fa-linkedin-in"></i></a></li>
											</ul>
										</div>
										<div class="more-button float-end">
											<a href="{% url 'blog_detail' blog.blog_slug %}"><span class="icon-options"></span></a>
										</div>
									</div>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>
			</div>

			<div class="col-lg-4">
				<!-- sidebar -->
				{% comment %} <div class="sidebar">
					<!-- widget about -->
					<div class="widget rounded">
						<div class="widget-about data-bg-image text-center" data-bg-image="{% static 'images/map-bg.png' %}">
							<img src="{% static 'images/logo_as.png' %}" alt="logo" class="mb-4" />
							<p class="mb-4">Hellow, Enhance your knowldgw by reading Blog</p>
							<ul class="social-icons list-unstyled list-inline mb-0">
								<li class="list-inline-item"><a href="#"><i class="fab fa-facebook-f"></i></a></li>
								<li class="list-inline-item"><a href="#"><i class="fab fa-twitter"></i></a></li>
								<li class="list-inline-item"><a href="#"><i class="fab fa-instagram"></i></a></li>
							</ul>
						</div>
					</div> {% endcomment %}

					<!-- widget popular posts -->
					<div class="widget rounded">
						<div class="widget-header text-center">
							<h3 class="widget-title">Popular Posts</h3>
							<img src="{% static 'images/wave.svg' %}" class="wave" alt="wave" />
						</div>
						<div class="widget-content">
							{% for blog in post|slice:":3" %}
							<div class="post post-list-sm circle">
								<div class="thumb circle">
									<span class="number">{{forloop.counter}}</span>
									<a href="{% url 'blog_detail' blog.blog_slug %}">
										<div class="inner">
											<img src="{{blog.img.url}}" alt="{{blog.title}}" />
										</div>
									</a>
								</div>
								<div class="details clearfix">
									<h6 class="post-title my-0"><a href="{% url 'blog_detail' blog.blog_slug %}">{{blog.title}}</a></h6>
									<ul class="meta list-inline mt-1 mb-0">
										<li class="list-inline-item">{{blog.date|date:"F d, Y"}}</li>
									</ul>
								</div>
							</div>
							{% endfor %}
						</div>
					</div>

					<!-- widget categories -->
					<div class="widget rounded">
						<div class="widget-header text-center">
							<h3 class="widget-title">Explore Topics</h3>
							<img src="{% static 'images/wave.svg' %}" class="wave" alt="wave" />
						</div>
						<div class="widget-content">
							<ul class="list">
								{% for cat in category %}
								<li><a href="{% url 'category' cat.slug %}">{{cat.name}}</a><span>({{cat.blogs.count}})</span></li>
								{% endfor %}
							</ul>
						</div>
					</div>

					<!-- widget tags -->
					<div class="widget rounded">
						<div class="widget-header text-center">
							<h3 class="widget-title">Tag Clouds</h3>
							<img src="{% static 'images/wave.svg' %}" class="wave" alt="wave" />
						</div>
						<div class="widget-content">
							<a href="#" class="tag">#Trending</a>
							<a href="#" class="tag">#Featured</a>
							<a href="#" class="tag">#Popular</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- instagram feed -->
<div class="instagram">
	<div class="container-xl">
		<a href="https://www.instagram.com/ashraf_1600_/" class="btn btn-default btn-instagram">Ashraf on Instagram</a>
		<div class="instagram-feed d-flex flex-wrap">
			<div class="insta-item col-sm-2 col-6 col-md-2">
				<a href="https://www.instagram.com/p/DFhefLLpHX2/?img_index=1"><img src="{% static 'images/insta/insta_ash1.png' %}" alt="insta" /></a>
			</div>
			<div class="insta-item col-sm-2 col-6 col-md-2">
				<a href="https://www.instagram.com/p/C8U2xbxyUqs/?img_index=1"><img src="{% static 'images/insta/insta_ash2.png' %}" alt="insta" /></a>
			</div>
			<div class="insta-item col-sm-2 col-6 col-md-2">
				<a href="https://www.instagram.com/p/DBQr7UfJWxu/"><img src="{% static 'images/insta/insta_ash3.png' %}" alt="insta" /></a>
			</div>
			<div class="insta-item col-sm-2 col-6 col-md-2">
				<a href="#"><img src="{% static 'images/insta/insta_ash4.png' %}" alt="insta" /></a>
			</div>
			<div class="insta-item col-sm-2 col-6 col-md-2">
				<a href="#"><img src="{% static 'images/insta/insta_ash5.png' %}" alt="insta" /></a>
			</div>
			<div class="insta-item col-sm-2 col-6 col-md-2">
				<a href="#"><img src="{% static 'images/insta/insta_ash6.png' %}" alt="insta" /></a>
			</div>
		</div>
	</div>
</div>

<!-- Add CSS to fix overlapping issues -->
<style>
    /* Fix for navbar overlapping content */
    .navbar-spacer {
        height: 80px;
    }
    
    #hero {
        position: relative;
        z-index: 1;
    }
    
    /* Ensure proper image display */
    .post.featured-post-lg .thumb img {
        width: 100%;
        height: auto;
        display: block;
    }
    
    /* If navbar is fixed, add body padding */
    body {
        padding-top: 0;
    }
    
    /* Make sure navbar has proper z-index */
    .navbar {
        position: relative;
        z-index: 1000;
    }
    
    /* If using fixed navbar, uncomment this */
    /*
    .navbar.fixed-top {
        z-index: 1030;
    }
    body {
        padding-top: 76px;
    }
    .navbar-spacer {
        display: none;
    }
    */
</style>

{% endblock body %}